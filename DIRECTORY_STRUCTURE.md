# HyphynessTracker Directory Structure

This document describes the organization of the HyphynessTracker project for use in Claude Code memory.

## Root Level Structure

```
HyphynessTracker/
├── README.md                    # Main project documentation
├── DIRECTORY_STRUCTURE.md       # This file - project organization guide
├── package.json                 # Node.js dependencies and scripts
├── package-lock.json           # Locked dependency versions
├── .env.local                  # Environment variables (API keys, URLs)
├── .mcp.json                   # MCP configuration
├── .gitignore                  # Git ignore rules
│
├── docs/                       # All project documentation
│   ├── bet_tracker_prd.md      # Original Product Requirements Document
│   ├── BetTracker-Code-Summary.md # Technical implementation summary
│   ├── macos/                  # macOS-specific documentation
│   │   └── PRD-Implementation.md # macOS app implementation details
│   ├── backend/                # Backend documentation (future)
│   └── api/                    # API documentation (future)
│
├── data/                       # Data files and exports
│   └── exports/                # CSV exports from the system
│       ├── export-ledger-*.csv
│       └── export-payments-*.csv
│
├── tests/                      # All test files
│   ├── fixtures/               # Test data and images
│   │   ├── bet1.png           # Sample bet screenshots
│   │   ├── bet2.png
│   │   └── bet3.png
│   ├── integration/            # Integration test scripts
│   │   ├── test-bets.js       # Bet testing script
│   │   ├── setup-users.js     # User setup script
│   │   └── admin-link.js      # Admin linking script
│   ├── macos/                  # macOS app tests (future)
│   └── backend/                # Backend tests (future)
│
├── supabase/                   # Backend configuration
│   ├── config.toml             # Supabase local config
│   ├── README.md               # Supabase setup instructions
│   ├── functions/              # Edge Functions (Deno)
│   │   ├── _shared/            # Shared utilities
│   │   │   ├── admin.ts        # Admin utilities
│   │   │   ├── cors.ts         # CORS configuration
│   │   │   ├── participants.ts # Participant parsing
│   │   │   ├── supabase.ts     # Supabase client
│   │   │   ├── types.ts        # TypeScript types
│   │   │   └── vision.ts       # Vision API integration
│   │   ├── add-bet/            # Add bet endpoint
│   │   ├── settle-bet/         # Settle bet endpoint
│   │   ├── settle-with-screenshot/ # Settle with proof endpoint
│   │   ├── find-matching-bet/  # Find matching pending bets
│   │   ├── get-active-bets/    # Get active bets endpoint
│   │   ├── parse-bet/          # Parse bet screenshot endpoint
│   │   ├── record-payment/     # Payment recording
│   │   ├── export-csv/         # CSV export endpoint
│   │   ├── admin-*/            # Various admin endpoints
│   │   └── [other functions]/
│   └── migrations/             # Database migrations
│       ├── 001_initial_schema.sql
│       ├── 002_rls_policies.sql
│       ├── 003_helper_functions.sql
│       ├── 004_super_admin.sql
│       ├── 005_bootstrap_admin.sql
│       ├── 006_bet_placer_tracking.sql
│       └── 008_settlement_screenshot.sql
│
└── macos/                      # macOS application
    ├── BetTracker/             # Xcode project root
    │   ├── BetTracker.xcodeproj/ # Xcode project file
    │   ├── BetTracker/         # Main app source
    │   │   ├── BetTrackerApp.swift    # App entry point
    │   │   ├── Info.plist             # App configuration
    │   │   ├── BetTracker.entitlements # App permissions
    │   │   ├── Assets.xcassets/       # App assets
    │   │   ├── Views/                 # SwiftUI Views
    │   │   │   ├── AuthenticationView.swift
    │   │   │   ├── BetApprovalView.swift
    │   │   │   ├── BetDetailsInputView.swift
    │   │   │   ├── ManualBetEntryView.swift
    │   │   │   ├── ParsingView.swift
    │   │   │   ├── SettlementView.swift
    │   │   │   ├── SettlementMatchingView.swift
    │   │   │   └── SettingsView.swift
    │   │   ├── Services/              # Business logic
    │   │   │   ├── AuthenticationManager.swift
    │   │   │   └── SupabaseClient.swift
    │   │   ├── Utils/                 # Utilities
    │   │   │   └── ParticipantParser.swift
    │   │   └── Models/                # Data models (empty, reserved for future use)
    │   ├── BetTrackerTests/           # Unit tests
    │   └── BetTrackerUITests/         # UI tests
    └── BetTracker_backup/             # Old backup (to be removed)
```

## Key Directories Explained

### `/docs`
Central location for all documentation. Organized by component (macOS, backend, API).

### `/data`
Runtime data and exports. The exports folder contains CSV files generated by the admin dashboard.

### `/tests`
All test files organized by type:
- `fixtures/`: Test data including sample bet screenshots
- `integration/`: Scripts for testing the full system
- Platform-specific test folders for future unit tests

### `/supabase`
Backend configuration and implementation:
- `functions/`: Edge Functions written in Deno/TypeScript
- `migrations/`: Database schema changes in order
- `_shared/`: Reusable code across functions

### `/macos/BetTracker`
macOS menu bar application organized by:
- `Views/`: All SwiftUI view components
- `Services/`: Business logic and external integrations
- `Utils/`: Helper functions and parsers
- `Models/`: Data structures (to be added)

## File Naming Conventions

### Documentation
- Use kebab-case for documentation: `bet-tracker-prd.md`
- Exception: This file uses CAPS for visibility: `DIRECTORY_STRUCTURE.md`

### Code Files
- Swift files: PascalCase matching class name: `AuthenticationView.swift`
- TypeScript files: kebab-case: `add-bet/index.ts`
- SQL migrations: numbered with snake_case: `001_initial_schema.sql`

### Test Files
- Integration tests: descriptive kebab-case: `test-bets.js`
- Unit tests: match source file with `Tests` suffix

## Import Paths

### macOS Swift Imports
```swift
// From any Swift file
import SwiftUI
// No need for relative imports - Xcode handles module imports
```

### Supabase Function Imports
```typescript
// From any edge function
import { corsHeaders } from '../_shared/cors.ts'
import { supabase } from '../_shared/supabase.ts'
import { BetData } from '../_shared/types.ts'
```

### Test Script Imports
```javascript
// From test scripts
import { createClient } from '@supabase/supabase-js'
import dotenv from 'dotenv'
dotenv.config({ path: '.env.local' })
```

## Development Workflow

1. **Documentation**: Update in `/docs` before implementing features
2. **Backend Changes**: Add migrations, then update edge functions
3. **macOS Changes**: Organize new files immediately into appropriate folders
4. **Testing**: Add test fixtures to `/tests/fixtures`
5. **Exports**: Generated files go to `/data/exports`

## Future Additions

### Planned Directories
- `/docs/backend/` - API endpoint documentation
- `/docs/api/` - Public API documentation
- `/tests/macos/` - Swift unit tests
- `/tests/backend/` - Edge function tests
- `/macos/BetTracker/BetTracker/Models/` - Swift data models

### When to Create New Directories
- New platform support (iOS, Android)
- New major features requiring multiple files
- New types of documentation or tests
- Integration with external services

This structure promotes:
- Clear separation of concerns
- Easy navigation for new developers
- Consistent organization across platforms
- Scalability for future features